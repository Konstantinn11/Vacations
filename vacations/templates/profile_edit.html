{% extends "base.html" %}
{% load cache %}
{% block title %}Графики отпусков{% endblock %}
{% load user_filters %}
{% load static %}
{% block header %}
<div style="display: flex; flex-direction: row; justify-content: left; align-items: center; flex-wrap: nowrap; width: 120%;">
    <a style="color: black; font-weight: bold; font-size: 34px; text-align: left; line-height: 50px; white-space: nowrap; margin-left: 358px;">Редактирование сотрудника</a>
</div>

<style>
    .table-container { width: 750px; margin: 0 auto; margin-top: 20px; margin-left: 358px; padding: 30px; background-color: #f7f7f7; box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.2); border-radius: 5px; }
	.btn-edit { background-color: #15a362; font-family: 'Calibri'; font-style: normal; width: 140px; height: 44px; font-weight: 700; font-size: 20px; padding: 0 10px; border-radius: 5px; color: white; text-align: center; display: flex; align-items: center; justify-content: center; text-decoration: none; text-transform: none; margin: 0;}
	.btn-my-vacations { background-color: #f7f7f7; color: #5d6778 !important; border: 1px solid #ccc; font-family: 'Calibri'; font-style: normal; font-weight: 700; width: 130px; height: 44px; font-size: 20px; padding: 0 10px; border-radius: 5px; color: white; text-align: center; display: flex; align-items: center; justify-content: center; text-decoration: none; margin-left: 20px; }
	.btn-edit:hover { background-color: rgba(21, 163, 98, 0.8); text-decoration: none; color: white; }
	.btn-my-vacations:hover { text-decoration: none; color: #15a362 !important; border: 1px solid #15a362; }
    .btn-delete { background-color: #d26d69; font-family: 'Calibri'; font-style: normal; font-weight: 700; width: 140px; height: 44px; font-size: 20px; padding: 0 10px; border-radius: 5px; color: white; text-align: center; display: flex; align-items: center; justify-content: center; text-decoration: none; margin-left: 170px; }
    .btn-delete:hover { background-color: rgba(210, 109, 105, 0.9); text-decoration: none; color: white; }
    .form-label { font-size: 20px; color: #5d6778; font-weight: bold; margin-bottom: 8px; }  
    .table-container form { display: flex; flex-direction: column; max-width: 620px; align-items: flex-start; font-size: 20px; }  
    .table-container input, .table-container select { font-size: 20px; padding: 8px; width: 100%; max-width: 620px; height: 50px; border: 1px solid #ccc; border-radius: 5px; margin-bottom: 16px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; transition: border-color 0.3s ease; color: #5d6778; }  
    .table-container select { appearance: none; text-align: left; font-weight: normal; background-color: white; }  
    .table-container input:focus, .table-container select:focus { border-color: #0d6efd; outline: none; }
</style>    
{% endblock %}

{% block aside %}
    {% include 'includes/aside_vac_all.html' %}
{% endblock %}

{% block content %}
<div class="table-container">
    <form method="post">
        {% csrf_token %}
        
        <label for="full_name" class="form-label">ФИО<span style="color: red;">&nbsp;*</span></label>
        <input type="text" id="full_name" name="full_name" value="{{ user_info.user.first_name }} {{ user_info.user.last_name }}" required>

        <label for="email" class="form-label">Email</label>
        <input type="email" id="email" name="email" value="{{ user_info.user.email }}" required>

        <label for="position" class="form-label">Должность</label>
        <input type="text" id="position" name="position" value="{{ user_info.position.position|default_if_none:'' }}" required>

        <label for="department" class="form-label">Отдел</label>
        <select id="department" name="department" style="cursor: pointer;">
            {% for dep in departments %}
                <option value="{{ dep.id }}" style="font-weight: normal;" {% if user_info.otd_number == dep %}selected{% endif %}>
                    {{ dep.title }}
                </option>
            {% endfor %}
        </select>

        <label for="tags" class="form-label">Теги</label>
        <input type="text" id="tags" name="tags" placeholder="Не найдено сотрудников с тегами." readonly>

        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button class="btn-edit" type="submit">Сохранить</button>
            <a class="btn-my-vacations" href="{% url 'vac_my_profile' %}">Отмена</a>
            <a class="btn-delete" href="{% url 'delete_account' %}" onclick="confirmDeletion(event, this)">Удалить</a>
        </div>
        <div style="margin-top: 20px;"><span style="color: red;">*</span><span style="font-style: italic; color: #5d6778;"> - обязательные поля.</span></div>
    </form>
</div>

<script>
    function confirmDeletion(event, element) {
        event.preventDefault();

        if (confirm("Вы уверены, что хотите удалить аккаунт? Это действие невозможно отменить.")) {
            window.location.href = element.href;
        }
    }
</script>
{% endblock %}